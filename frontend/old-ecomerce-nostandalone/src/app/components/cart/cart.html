<div class="container mt-4">
  <h2>Carrito</h2>
  <div *ngIf="!items.length" class="alert alert-info">
    Tu carrito está vacío.
  </div>
  <table *ngIf="items.length" class="table">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Precio</th>
        <th>Cantidad</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let it of items">
        <td>
          <img [src]="imageBase + '/' + it.product.image"
               alt="{{ it.product.name }}"
               style="height:50px; object-fit:cover; margin-right:10px;">
          {{ it.product.name }}
        </td>
        <td>{{ it.product.price | currency:'EUR' }}</td>
        <td>
          <input type="number" class="form-control w-50"
                 [value]="it.quantity"
                 (change)="updateQty(it, $event.target.valueAsNumber)">
        </td>
        <td>{{ (it.product.price * it.quantity) | currency:'EUR' }}</td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="items.length" class="d-flex justify-content-between align-items-center">
    <button class="btn btn-danger" (click)="clearCart()">Vaciar carrito</button>
    <h4>Total: {{ total | currency:'EUR' }}</h4>
    <button class="btn btn-success" (click)="checkout()">Checkout</button>
  </div>
</div>
